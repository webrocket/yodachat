<div id="room" role="main">
<ul id="chatlog">
</ul>

<form id="new_message">
  <div class="inner">
    <div class="frame">
      <label for="new_message_text" id="new_message_text_wrapper">
        <span class="label">Your message:</span>
        <textarea id="new_message_text" name="new_message[text]" cols="77" rows="2" autofocus="autofocus"></textarea>
      </label>
      <input type="submit" id="message_send" class="btn" value="Send">
      <div class="clearfix"></div>
    </div>
  </div>
</form>

<div class="in">
</div>
  
</div>

<script type="text/html" id="message_tpl">
  <li>
    <span class="fn"></span>
    <div class="msg"></div>
    <time class="when" datetime=""></time>
  </li>
</script>

<script type="text/html" id="sys_message_tpl">
  <li class="sys_msg"></li>
</script>

<script defer="defer" src="/js/helpers.js"></script>
<script defer="defer" src="/js/room.js"></script>
<script defer="defer">   
    var screenName = !!localStorage.screenName ? localStorage.screenName : "";

    while (screenName == "") {
        screenName = prompt("What's your name?");
        localStorage.screenName = screenName;
    }
    
    var accessToken = "<%= @single_access_token %>"
      , chanName = "presence-room-<%= @room.name %>"
      , roomId = "<%= @room.name %>"
      , ws = new WebSocket("<%= $WEBSOCKET_URL %>")
</script>
